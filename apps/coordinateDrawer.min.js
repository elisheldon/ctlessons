var c=document.getElementById("coordinatePlane"),ctx=c.getContext("2d"),planeWidth=1e3,planeHeight=600,gridSize=25,pairsArray=[],rowsArray=[],flippedX=!1,flippedY=!1,drawn=!1,lineColor="#000000";function drawBackground(){for(ctx.beginPath(),i=1;i<planeWidth/gridSize;i++)ctx.moveTo(gridSize*i,0),ctx.lineTo(gridSize*i,planeHeight);for(i=1;i<planeHeight/gridSize;i++)ctx.moveTo(0,gridSize*i),ctx.lineTo(planeWidth,gridSize*i);ctx.lineWidth=.5,ctx.strokeStyle="#808080",ctx.stroke(),ctx.beginPath(),ctx.moveTo(planeWidth/2,0),ctx.lineTo(planeWidth/2,planeHeight),ctx.moveTo(0,planeHeight/2),ctx.lineTo(planeWidth,planeHeight/2),ctx.lineWidth=8,ctx.strokeStyle="#000000",ctx.stroke()}function getPairs(){var e=0;if(document.getElementById("pairsInput").value.match(/[a-zA-Z+!@#$%^&*;?\/=_~()|]|\.\./))e=1;else{rowsArray=document.getElementById("pairsInput").value.split("\n");var r=[];for(i=0;i<rowsArray.length;i++)""!=rowsArray[i]&&(r[i]=rowsArray[i].split(","),2==r[i].length?pairsArray[i]=[Number(r[i][0])*gridSize+planeWidth/2,(0-Number(r[i][1]))*gridSize+planeHeight/2]:e=1)}return e}function draw(){if(document.getElementById("status").innerHTML="",err=getPairs(),1==err)document.getElementById("status").innerHTML="There's something wrong with your coordinate pairs...",clear();else{for(ctx.beginPath(),ctx.moveTo(pairsArray[0][0],pairsArray[0][1]),i=1;i<pairsArray.length;i++)ctx.lineTo(pairsArray[i][0],pairsArray[i][1]);ctx.lineWidth=5,ctx.strokeStyle=lineColor,ctx.stroke()}drawn=!0}function mirrorX(){var e=[],r=[];for(i=0;i<rowsArray.length;i++)e[i]=rowsArray[i].split(","),r[i]=[Number(e[i][0])*gridSize+planeWidth/2,Number(e[i][1])*gridSize+planeHeight/2];for(ctx.beginPath(),ctx.moveTo(r[0][0],r[0][1]),i=1;i<rowsArray.length;i++)ctx.lineTo(r[i][0],r[i][1]);ctx.lineWidth=5,ctx.strokeStyle=lineColor,ctx.stroke(),flippedX=!0,flippedY&&mirrorXandY()}function mirrorY(){var e=[],r=[];for(i=0;i<rowsArray.length;i++)e[i]=rowsArray[i].split(","),r[i]=[planeWidth/2-Number(e[i][0])*gridSize,(0-Number(e[i][1]))*gridSize+planeHeight/2];for(ctx.beginPath(),ctx.moveTo(r[0][0],r[0][1]),i=1;i<rowsArray.length;i++)ctx.lineTo(r[i][0],r[i][1]);ctx.lineWidth=5,ctx.strokeStyle=lineColor,ctx.stroke(),flippedY=!0,flippedX&&mirrorXandY()}function mirrorXandY(){var e=[],r=[];for(i=0;i<rowsArray.length;i++)e[i]=rowsArray[i].split(","),r[i]=[planeWidth/2-Number(e[i][0])*gridSize,Number(e[i][1])*gridSize+planeHeight/2];for(ctx.beginPath(),ctx.moveTo(r[0][0],r[0][1]),i=1;i<rowsArray.length;i++)ctx.lineTo(r[i][0],r[i][1]);ctx.lineWidth=5,ctx.strokeStyle=lineColor,ctx.stroke()}function clear(){ctx.clearRect(0,0,c.width,c.height),drawBackground(),pairsArray=[],rowsArray=[],flippedX=!1,flippedY=!1,drawn=!1}function zoom(e){switch(e){case"2":ctx.clearRect(0,0,c.width,c.height),gridSize=50,drawBackground(),drawn&&draw(),flippedX&&mirrorX(),flippedY&&mirrorY();break;case"1":ctx.clearRect(0,0,c.width,c.height),gridSize=25,drawBackground(),drawn&&draw(),flippedX&&mirrorX(),flippedY&&mirrorY();break;case"0":ctx.clearRect(0,0,c.width,c.height),gridSize=10,drawBackground(),drawn&&draw(),flippedX&&mirrorX(),flippedY&&mirrorY();break;default:document.getElementById("status").innerHTML="zoom is broken"}}function setColor(e){switch(e){case"black":lineColor="#000000";break;case"blue":lineColor="#0000FF";break;case"red":lineColor="#FF0000";break;case"green":lineColor="#00FF00";break;case"pink":lineColor="#FF69B4";break;case"yellow":lineColor="#FFFF00";break;case"orange":lineColor="#FF9900";break;case"purple":lineColor="#990099"}drawn&&draw(),flippedX&&mirrorX(),flippedY&&mirrorY()}drawBackground(),document.getElementById("pairsInput").value="0,0",document.getElementById("drawButton").onclick=function(){draw()},document.getElementById("clearButton").onclick=function(){clear()},document.getElementById("mirrorXButton").onclick=function(){mirrorX()},document.getElementById("mirrorYButton").onclick=function(){mirrorY()},document.getElementById("zoomRange").onchange=function(){zoom(document.getElementById("zoomRange").value)},document.getElementById("colorPicker").onchange=function(){setColor(document.getElementById("colorPicker").value)};